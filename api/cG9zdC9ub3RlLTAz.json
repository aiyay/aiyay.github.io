{"title":"滑动时候警告：Unable to preventDefault inside passive event listener","date":"2018-12-28T02:56:30.000Z","author":"aiyay","excerpt":"","slug":"note-03","dropcap":true,"tags":["css"],"categories":["note"],"updated":"2018-12-28T03:34:13.007Z","content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><script class=\"meting-secondary-script-marker\" src=\"\\assets\\js\\Meting.min.js\"></script><h2 id=\"移动端Web界面滚动性能优化-Passive-event-listeners\"><a href=\"#移动端Web界面滚动性能优化-Passive-event-listeners\" class=\"headerlink\" title=\"移动端Web界面滚动性能优化 Passive event listeners\"></a>移动端Web界面滚动性能优化 Passive event listeners</h2><h3 id=\"控制台打印如下警告：\"><a href=\"#控制台打印如下警告：\" class=\"headerlink\" title=\"控制台打印如下警告：\"></a>控制台打印如下警告：</h3><h4 id=\"Intervention-Unable-to-preventDefault-inside-passive-event-listener-due-to-target-being-treated-as-passive-See-https-www-chromestatus-com-features-5093566007214080\"><a href=\"#Intervention-Unable-to-preventDefault-inside-passive-event-listener-due-to-target-being-treated-as-passive-See-https-www-chromestatus-com-features-5093566007214080\" class=\"headerlink\" title=\"[Intervention] Unable to preventDefault inside passive event listener due to target being treated as passive. See https://www.chromestatus.com/features/5093566007214080\"></a><code>[Intervention] Unable to preventDefault inside passive event listener due to target being treated as passive. See https://www.chromestatus.com/features/5093566007214080</code></h4><h3 id=\"解决办法1：\"><a href=\"#解决办法1：\" class=\"headerlink\" title=\"解决办法1：\"></a>解决办法1：</h3><h4 id=\"在touch的事件监听方法上绑定第三个参数-passive-false-，通过传递-passive-为-false-来明确告诉浏览器：事件处理程序调用-preventDefault-来阻止默认滑动行为。\"><a href=\"#在touch的事件监听方法上绑定第三个参数-passive-false-，通过传递-passive-为-false-来明确告诉浏览器：事件处理程序调用-preventDefault-来阻止默认滑动行为。\" class=\"headerlink\" title=\"在touch的事件监听方法上绑定第三个参数{ passive: false }，通过传递 passive 为 false 来明确告诉浏览器：事件处理程序调用 preventDefault 来阻止默认滑动行为。\"></a>在touch的事件监听方法上绑定第三个参数{ passive: false }，通过传递 passive 为 false 来明确告诉浏览器：事件处理程序调用 preventDefault 来阻止默认滑动行为。</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">elem.addEventListener (</span><br><span class=\"line\">  &apos;touchstart&apos;,</span><br><span class=\"line\">  fn,</span><br><span class=\"line\">  &#123; passive: false &#125;</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<h3 id=\"解决办法2：\"><a href=\"#解决办法2：\" class=\"headerlink\" title=\"解决办法2：\"></a>解决办法2：</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">* &#123; touch-action: pan-y; &#125; </span><br><span class=\"line\">// 使用全局样式样式去掉</span><br></pre></td></tr></table></figure>\n<h3 id=\"CSS属性-touch-action-用于指定某个给定的区域是否允许用户操作，以及如何响应用户操作（比如浏览器自带的划动、缩放等）。\"><a href=\"#CSS属性-touch-action-用于指定某个给定的区域是否允许用户操作，以及如何响应用户操作（比如浏览器自带的划动、缩放等）。\" class=\"headerlink\" title=\"CSS属性 touch-action 用于指定某个给定的区域是否允许用户操作，以及如何响应用户操作（比如浏览器自带的划动、缩放等）。\"></a>CSS属性 touch-action 用于指定某个给定的区域是否允许用户操作，以及如何响应用户操作（比如浏览器自带的划动、缩放等）。</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/* Keyword values */</span><br><span class=\"line\">touch-action: auto;</span><br><span class=\"line\">touch-action: none;</span><br><span class=\"line\">touch-action: pan-x;</span><br><span class=\"line\">touch-action: pan-left;</span><br><span class=\"line\">touch-action: pan-right;</span><br><span class=\"line\">touch-action: pan-y;</span><br><span class=\"line\">touch-action: pan-up;</span><br><span class=\"line\">touch-action: pan-down;</span><br><span class=\"line\">touch-action: pinch-zoom;</span><br><span class=\"line\">touch-action: manipulation;</span><br><span class=\"line\"></span><br><span class=\"line\">/* Global values */</span><br><span class=\"line\">touch-action: inherit;</span><br><span class=\"line\">touch-action: initial;</span><br><span class=\"line\">touch-action: unset;</span><br></pre></td></tr></table></figure>\n<h4 id=\"默认情况下，平移（滚动）和缩放手势由浏览器专门处理。-使用-Pointer-events-的应用程序将在浏览器开始处理触摸手势时收到一个-pointercancel-事件。-通过明确指定浏览器应该处理哪些手势，应用程序可以在-pointermove-和-pointerup-监听器中为其余的手势提供自己的行为。-使用-Touch-events-的应用程序通过调用-preventDefault-禁用浏览器处理手势，但也应使用触摸操作确保浏览器在调用任何事件侦听器之前，了解应用程序的意图。\"><a href=\"#默认情况下，平移（滚动）和缩放手势由浏览器专门处理。-使用-Pointer-events-的应用程序将在浏览器开始处理触摸手势时收到一个-pointercancel-事件。-通过明确指定浏览器应该处理哪些手势，应用程序可以在-pointermove-和-pointerup-监听器中为其余的手势提供自己的行为。-使用-Touch-events-的应用程序通过调用-preventDefault-禁用浏览器处理手势，但也应使用触摸操作确保浏览器在调用任何事件侦听器之前，了解应用程序的意图。\" class=\"headerlink\" title=\"默认情况下，平移（滚动）和缩放手势由浏览器专门处理。 使用 Pointer_events 的应用程序将在浏览器开始处理触摸手势时收到一个 pointercancel 事件。 通过明确指定浏览器应该处理哪些手势，应用程序可以在 pointermove 和 pointerup 监听器中为其余的手势提供自己的行为。 使用 Touch_events 的应用程序通过调用 preventDefault() 禁用浏览器处理手势，但也应使用触摸操作确保浏览器在调用任何事件侦听器之前，了解应用程序的意图。\"></a>默认情况下，平移（滚动）和缩放手势由浏览器专门处理。 使用 Pointer_events 的应用程序将在浏览器开始处理触摸手势时收到一个 pointercancel 事件。 通过明确指定浏览器应该处理哪些手势，应用程序可以在 pointermove 和 pointerup 监听器中为其余的手势提供自己的行为。 使用 Touch_events 的应用程序通过调用 preventDefault() 禁用浏览器处理手势，但也应使用触摸操作确保浏览器在调用任何事件侦听器之前，了解应用程序的意图。</h4><h4 id=\"当手势开始时，浏览器与触摸的元素及其所有祖先的触摸动作值相交直到一个实现手势（换句话说，第一个包含滚动元素）的触摸动作值。-这意味着在实践中，触摸动作通常仅适用于具有某些自定义行为的单个元素，而无需在该元素的任何后代上明确指定触摸动作。-手势开始之后，触摸动作值的更改将不会对当前手势的行为产生任何影响。\"><a href=\"#当手势开始时，浏览器与触摸的元素及其所有祖先的触摸动作值相交直到一个实现手势（换句话说，第一个包含滚动元素）的触摸动作值。-这意味着在实践中，触摸动作通常仅适用于具有某些自定义行为的单个元素，而无需在该元素的任何后代上明确指定触摸动作。-手势开始之后，触摸动作值的更改将不会对当前手势的行为产生任何影响。\" class=\"headerlink\" title=\"当手势开始时，浏览器与触摸的元素及其所有祖先的触摸动作值相交直到一个实现手势（换句话说，第一个包含滚动元素）的触摸动作值。 这意味着在实践中，触摸动作通常仅适用于具有某些自定义行为的单个元素，而无需在该元素的任何后代上明确指定触摸动作。 手势开始之后，触摸动作值的更改将不会对当前手势的行为产生任何影响。\"></a>当手势开始时，浏览器与触摸的元素及其所有祖先的触摸动作值相交直到一个实现手势（换句话说，第一个包含滚动元素）的触摸动作值。 这意味着在实践中，触摸动作通常仅适用于具有某些自定义行为的单个元素，而无需在该元素的任何后代上明确指定触摸动作。 手势开始之后，触摸动作值的更改将不会对当前手势的行为产生任何影响。</h4><h3 id=\"语法\"><a href=\"#语法\" class=\"headerlink\" title=\"语法\"></a>语法</h3><h4 id=\"touch-action-属性可以被指定为\"><a href=\"#touch-action-属性可以被指定为\" class=\"headerlink\" title=\"touch-action 属性可以被指定为:\"></a>touch-action 属性可以被指定为:</h4><h4 id=\"任何一个关键字-auto、none、manipulation，或零或任何一个关键字-pan-x、pan-left、pan-right，加零或任何一个关键字-pan-y、pan-up、pan-down，加可选关键字-pinch-zoom\"><a href=\"#任何一个关键字-auto、none、manipulation，或零或任何一个关键字-pan-x、pan-left、pan-right，加零或任何一个关键字-pan-y、pan-up、pan-down，加可选关键字-pinch-zoom\" class=\"headerlink\" title=\"任何一个关键字 auto、none、manipulation，或零或任何一个关键字 pan-x、pan-left、pan-right，加零或任何一个关键字 pan-y、pan-up、pan-down，加可选关键字 pinch-zoom.\"></a>任何一个关键字 auto、none、manipulation，或零或任何一个关键字 pan-x、pan-left、pan-right，加零或任何一个关键字 pan-y、pan-up、pan-down，加可选关键字 pinch-zoom.</h4><h2 id=\"值\"><a href=\"#值\" class=\"headerlink\" title=\"值\"></a>值</h2><h4 id=\"auto\"><a href=\"#auto\" class=\"headerlink\" title=\"auto\"></a>auto</h4><h4 id=\"当触控事件发生在元素上时，由浏览器来决定进行哪些操作，比如对viewport进行平滑、缩放等。\"><a href=\"#当触控事件发生在元素上时，由浏览器来决定进行哪些操作，比如对viewport进行平滑、缩放等。\" class=\"headerlink\" title=\"当触控事件发生在元素上时，由浏览器来决定进行哪些操作，比如对viewport进行平滑、缩放等。\"></a>当触控事件发生在元素上时，由浏览器来决定进行哪些操作，比如对viewport进行平滑、缩放等。</h4><h4 id=\"none\"><a href=\"#none\" class=\"headerlink\" title=\"none\"></a>none</h4><h4 id=\"当触控事件发生在元素上时，不进行任何操作。\"><a href=\"#当触控事件发生在元素上时，不进行任何操作。\" class=\"headerlink\" title=\"当触控事件发生在元素上时，不进行任何操作。\"></a>当触控事件发生在元素上时，不进行任何操作。</h4><h4 id=\"pan-x\"><a href=\"#pan-x\" class=\"headerlink\" title=\"pan-x\"></a>pan-x</h4><h4 id=\"启用单指水平平移手势。可以与-pan-y-、pan-up、pan-down-和／或-pinch-zoom-组合使用。\"><a href=\"#启用单指水平平移手势。可以与-pan-y-、pan-up、pan-down-和／或-pinch-zoom-组合使用。\" class=\"headerlink\" title=\"启用单指水平平移手势。可以与 pan-y 、pan-up、pan-down 和／或 pinch-zoom 组合使用。\"></a>启用单指水平平移手势。可以与 pan-y 、pan-up、pan-down 和／或 pinch-zoom 组合使用。</h4><h4 id=\"pan-y\"><a href=\"#pan-y\" class=\"headerlink\" title=\"pan-y\"></a>pan-y</h4><h4 id=\"启用单指垂直平移手势。可以与-pan-x-、pan-left-、pan-right-和／或-pinch-zoom-组合使用。\"><a href=\"#启用单指垂直平移手势。可以与-pan-x-、pan-left-、pan-right-和／或-pinch-zoom-组合使用。\" class=\"headerlink\" title=\"启用单指垂直平移手势。可以与 pan-x 、pan-left 、pan-right 和／或 pinch-zoom 组合使用。\"></a>启用单指垂直平移手势。可以与 pan-x 、pan-left 、pan-right 和／或 pinch-zoom 组合使用。</h4><h4 id=\"manipulation\"><a href=\"#manipulation\" class=\"headerlink\" title=\"manipulation\"></a>manipulation</h4><h4 id=\"浏览器只允许进行滚动和持续缩放操作。任何其它被auto值支持的行为不被支持。启用平移和缩小缩放手势，但禁用其他非标准手势，例如双击以进行缩放。-禁用双击可缩放功能可减少浏览器在用户点击屏幕时延迟生成点击事件的需要。-这是“pan-x-pan-y-pinch-zoom”（为了兼容性本身仍然有效）的别名。\"><a href=\"#浏览器只允许进行滚动和持续缩放操作。任何其它被auto值支持的行为不被支持。启用平移和缩小缩放手势，但禁用其他非标准手势，例如双击以进行缩放。-禁用双击可缩放功能可减少浏览器在用户点击屏幕时延迟生成点击事件的需要。-这是“pan-x-pan-y-pinch-zoom”（为了兼容性本身仍然有效）的别名。\" class=\"headerlink\" title=\"浏览器只允许进行滚动和持续缩放操作。任何其它被auto值支持的行为不被支持。启用平移和缩小缩放手势，但禁用其他非标准手势，例如双击以进行缩放。 禁用双击可缩放功能可减少浏览器在用户点击屏幕时延迟生成点击事件的需要。 这是“pan-x pan-y pinch-zoom”（为了兼容性本身仍然有效）的别名。\"></a>浏览器只允许进行滚动和持续缩放操作。任何其它被auto值支持的行为不被支持。启用平移和缩小缩放手势，但禁用其他非标准手势，例如双击以进行缩放。 禁用双击可缩放功能可减少浏览器在用户点击屏幕时延迟生成点击事件的需要。 这是“pan-x pan-y pinch-zoom”（为了兼容性本身仍然有效）的别名。</h4><h4 id=\"pan-left-pan-right-pan-up-pan-down\"><a href=\"#pan-left-pan-right-pan-up-pan-down\" class=\"headerlink\" title=\"pan-left, pan-right,pan-up,pan-down\"></a>pan-left, pan-right,pan-up,pan-down</h4><h4 id=\"启用以指定方向滚动开始的单指手势。-一旦滚动开始，方向可能仍然相反。-请注意，滚动“向上”（pan-up）意味着用户正在将其手指向下拖动到屏幕表面上，同样-pan-left-表示用户将其手指向右拖动。-多个方向可以组合，除非有更简单的表示（例如，“pan-left-pan-right”无效，因为“pan-x”更简单，而“pan-left-pan-down”有效）。\"><a href=\"#启用以指定方向滚动开始的单指手势。-一旦滚动开始，方向可能仍然相反。-请注意，滚动“向上”（pan-up）意味着用户正在将其手指向下拖动到屏幕表面上，同样-pan-left-表示用户将其手指向右拖动。-多个方向可以组合，除非有更简单的表示（例如，“pan-left-pan-right”无效，因为“pan-x”更简单，而“pan-left-pan-down”有效）。\" class=\"headerlink\" title=\"启用以指定方向滚动开始的单指手势。 一旦滚动开始，方向可能仍然相反。 请注意，滚动“向上”（pan-up）意味着用户正在将其手指向下拖动到屏幕表面上，同样 pan-left 表示用户将其手指向右拖动。 多个方向可以组合，除非有更简单的表示（例如，“pan-left pan-right”无效，因为“pan-x”更简单，而“pan-left pan-down”有效）。\"></a>启用以指定方向滚动开始的单指手势。 一旦滚动开始，方向可能仍然相反。 请注意，滚动“向上”（pan-up）意味着用户正在将其手指向下拖动到屏幕表面上，同样 pan-left 表示用户将其手指向右拖动。 多个方向可以组合，除非有更简单的表示（例如，“pan-left pan-right”无效，因为“pan-x”更简单，而“pan-left pan-down”有效）。</h4><h4 id=\"pinch-zoom\"><a href=\"#pinch-zoom\" class=\"headerlink\" title=\"pinch-zoom\"></a>pinch-zoom</h4><h4 id=\"启用多手指平移和缩放页面。-这可以与任何平移值组合。\"><a href=\"#启用多手指平移和缩放页面。-这可以与任何平移值组合。\" class=\"headerlink\" title=\"启用多手指平移和缩放页面。 这可以与任何平移值组合。\"></a>启用多手指平移和缩放页面。 这可以与任何平移值组合。</h4>","prev":{"title":"关于网页视频的知识初涉","slug":"note-04"},"next":{"title":"关于简单跨域请求和带预检的跨域请求","slug":"note-02"},"link":"/2018/12/28","toc":[{"title":"移动端Web界面滚动性能优化 Passive event listeners","id":"移动端Web界面滚动性能优化-Passive-event-listeners","index":"1","children":[{"title":"解决办法1：","id":"解决办法1：","index":"1.1","children":[{"title":"在touch的事件监听方法上绑定第三个参数{ passive: false }，通过传递 passive 为 false 来明确告诉浏览器：事件处理程序调用 preventDefault 来阻止默认滑动行为。","id":"在touch的事件监听方法上绑定第三个参数-passive-false-，通过传递-passive-为-false-来明确告诉浏览器：事件处理程序调用-preventDefault-来阻止默认滑动行为。","index":"1.1.1"}]},{"title":"解决办法2：","id":"解决办法2：","index":"1.2"},{"title":"CSS属性 touch-action 用于指定某个给定的区域是否允许用户操作，以及如何响应用户操作（比如浏览器自带的划动、缩放等）。","id":"CSS属性-touch-action-用于指定某个给定的区域是否允许用户操作，以及如何响应用户操作（比如浏览器自带的划动、缩放等）。","index":"1.3","children":[{"title":"启用多手指平移和缩放页面。 这可以与任何平移值组合。","id":"启用多手指平移和缩放页面。-这可以与任何平移值组合。","index":"1.3.1"}]}]}]}